{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\src\\layouts\\tabs\\TabsView.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\src\\layouts\\tabs\\TabsView.vue","mtime":1600420862378},{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600423573509},{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1600416510814},{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600423573509},{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1600423579954}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQWRtaW5MYXlvdXQgZnJvbSAnQC9sYXlvdXRzL0FkbWluTGF5b3V0Jw0KaW1wb3J0IENvbnRleHRtZW51IGZyb20gJ0AvY29tcG9uZW50cy9tZW51L0NvbnRleHRtZW51Jw0KaW1wb3J0IFBhZ2VUb2dnbGVUcmFuc2l0aW9uIGZyb20gJ0AvY29tcG9uZW50cy90cmFuc2l0aW9uL1BhZ2VUb2dnbGVUcmFuc2l0aW9uJw0KaW1wb3J0IHttYXBTdGF0ZSwgbWFwTXV0YXRpb25zfSBmcm9tICd2dWV4Jw0KaW1wb3J0IHtnZXRJMThuS2V5fSBmcm9tICdAL3V0aWxzL3JvdXRlclV0aWwnDQppbXBvcnQgQUtlZXBBbGl2ZSBmcm9tICdAL2NvbXBvbmVudHMvY2FjaGUvQUtlZXBBbGl2ZScNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnVGFic1ZpZXcnLA0KICBpMThuOiByZXF1aXJlKCcuL2kxOG4nKSwNCiAgY29tcG9uZW50czogeyBQYWdlVG9nZ2xlVHJhbnNpdGlvbiwgQ29udGV4dG1lbnUsIEFkbWluTGF5b3V0ICwgQUtlZXBBbGl2ZSB9LA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY2xlYXJDYWNoZXM6IFtdLA0KICAgICAgcGFnZUxpc3Q6IFtdLA0KICAgICAgY2FjaGVkS2V5czogW10sDQogICAgICBhY3RpdmVQYWdlOiAnJywNCiAgICAgIG1lbnVWaXNpYmxlOiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBTdGF0ZSgnc2V0dGluZycsIFsnbXVsdGlQYWdlJywgJ2FuaW1hdGUnLCAnbGF5b3V0JywgJ3BhZ2VXaWR0aCddKSwNCiAgICBtZW51SXRlbUxpc3QoKSB7DQogICAgICByZXR1cm4gWw0KICAgICAgICB7IGtleTogJzEnLCBpY29uOiAndmVydGljYWwtcmlnaHQnLCB0ZXh0OiB0aGlzLiR0KCdjbG9zZUxlZnQnKSB9LA0KICAgICAgICB7IGtleTogJzInLCBpY29uOiAndmVydGljYWwtbGVmdCcsIHRleHQ6IHRoaXMuJHQoJ2Nsb3NlUmlnaHQnKSB9LA0KICAgICAgICB7IGtleTogJzMnLCBpY29uOiAnY2xvc2UnLCB0ZXh0OiB0aGlzLiR0KCdjbG9zZU90aGVycycpIH0NCiAgICAgIF0NCiAgICB9LA0KICAgIHRhYnNPZmZzZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5tdWx0aVBhZ2UgPyAyNCA6IDANCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIGNvbnN0IHJvdXRlID0gdGhpcy4kcm91dGUNCiAgICB0aGlzLnBhZ2VMaXN0LnB1c2gocm91dGUpDQogICAgdGhpcy5hY3RpdmVQYWdlID0gcm91dGUuZnVsbFBhdGgNCiAgICBpZiAodGhpcy5tdWx0aVBhZ2UpIHsNCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwYWdlOmNsb3NlJywgdGhpcy5jbG9zZVBhZ2VMaXN0ZW5lcikNCiAgICB9DQogIH0sDQogIG1vdW50ZWQgKCkgew0KICAgIHRoaXMuY29ycmVjdFBhZ2VNaW5IZWlnaHQoLXRoaXMudGFic09mZnNldCkNCiAgICBpZih0aGlzLm11bHRpUGFnZSl7DQogICAgICB0aGlzLmNhY2hlZEtleXMucHVzaCh0aGlzLiRyZWZzLnRhYkNvbnRlbnQuJHZub2RlLmtleSkNCiAgICB9DQogIH0sDQogIGJlZm9yZURlc3Ryb3koKSB7DQogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BhZ2U6Y2xvc2UnLCB0aGlzLmNsb3NlUGFnZUxpc3RlbmVyKQ0KICAgIHRoaXMuY29ycmVjdFBhZ2VNaW5IZWlnaHQodGhpcy50YWJzT2Zmc2V0KQ0KICB9LA0KICB3YXRjaDogew0KICAgICckcm91dGUnOiBmdW5jdGlvbiAobmV3Um91dGUpIHsNCiAgICAgIHRoaXMuYWN0aXZlUGFnZSA9IG5ld1JvdXRlLmZ1bGxQYXRoDQogICAgICBpZiAoIXRoaXMubXVsdGlQYWdlKSB7DQogICAgICAgIHRoaXMucGFnZUxpc3QgPSBbbmV3Um91dGVdDQogICAgICB9IGVsc2UgaWYgKHRoaXMucGFnZUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5mdWxsUGF0aCA9PSBuZXdSb3V0ZS5mdWxsUGF0aCkgPT0gLTEpIHsNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIHRoaXMuY2FjaGVkS2V5cy5wdXNoKHRoaXMuJHJlZnMudGFiQ29udGVudC4kdm5vZGUua2V5KQ0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLnBhZ2VMaXN0LnB1c2gobmV3Um91dGUpDQogICAgICB9DQogICAgfSwNCiAgICAnbXVsdGlQYWdlJzogZnVuY3Rpb24gKG5ld1ZhbCkgew0KICAgICAgaWYgKCFuZXdWYWwpIHsNCiAgICAgICAgdGhpcy5wYWdlTGlzdCA9IFt0aGlzLiRyb3V0ZV0NCiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BhZ2U6Y2xvc2UnLCB0aGlzLmNsb3NlUGFnZUxpc3RlbmVyKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2U6Y2xvc2UnLCB0aGlzLmNsb3NlUGFnZUxpc3RlbmVyKQ0KICAgICAgfQ0KICAgIH0sDQogICAgdGFic09mZnNldChuZXdWYWwsIG9sZFZhbCkgew0KICAgICAgdGhpcy5jb3JyZWN0UGFnZU1pbkhlaWdodChvbGRWYWwgLSBuZXdWYWwpDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgY2hhbmdlUGFnZSAoa2V5KSB7DQogICAgICB0aGlzLmFjdGl2ZVBhZ2UgPSBrZXkNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGtleSkNCiAgICB9LA0KICAgIGVkaXRQYWdlIChrZXksIGFjdGlvbikgew0KICAgICAgdGhpc1thY3Rpb25dKGtleSkgLy8gcmVtb3ZlDQogICAgfSwNCiAgICByZW1vdmUgKGtleSwgbmV4dCkgew0KICAgICAgaWYgKHRoaXMucGFnZUxpc3QubGVuZ3RoID09PSAxKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLndhcm5pbmcodGhpcy4kdCgnd2FybicpKQ0KICAgICAgfQ0KICAgICAgbGV0IGluZGV4ID0gdGhpcy5wYWdlTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmZ1bGxQYXRoID09PSBrZXkpDQogICAgICAvL+a4hemZpOe8k+WtmA0KICAgICAgdGhpcy5jbGVhckNhY2hlcyA9IHRoaXMuY2FjaGVkS2V5cy5zcGxpY2UoaW5kZXgsIDEpDQogICAgICB0aGlzLnBhZ2VMaXN0LnNwbGljZShpbmRleCwgMSkNCiAgICAgIGlmIChuZXh0KSB7DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKG5leHQpDQogICAgICB9IGVsc2UgaWYgKGtleSA9PT0gdGhpcy5hY3RpdmVQYWdlKSB7DQogICAgICAgIGluZGV4ID0gaW5kZXggPj0gdGhpcy5wYWdlTGlzdC5sZW5ndGggPyB0aGlzLnBhZ2VMaXN0Lmxlbmd0aCAtIDEgOiBpbmRleA0KICAgICAgICB0aGlzLmFjdGl2ZVBhZ2UgPSB0aGlzLnBhZ2VMaXN0W2luZGV4XS5mdWxsUGF0aA0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0aGlzLmFjdGl2ZVBhZ2UpDQogICAgICB9DQogICAgfSwNCiAgICBvbkNvbnRleHRtZW51IChlKSB7DQogICAgICBjb25zdCBwYWdlS2V5ID0gZ2V0UGFnZUtleShlLnRhcmdldCkNCiAgICAgIGlmIChwYWdlS2V5KSB7DQogICAgICAgIGUucHJldmVudERlZmF1bHQoKQ0KICAgICAgICB0aGlzLm1lbnVWaXNpYmxlID0gdHJ1ZQ0KICAgICAgfQ0KICAgIH0sDQogICAgb25NZW51U2VsZWN0IChrZXksIHRhcmdldCkgew0KICAgICAgbGV0IHBhZ2VLZXkgPSBnZXRQYWdlS2V5KHRhcmdldCkNCiAgICAgIHN3aXRjaCAoa2V5KSB7DQogICAgICAgIGNhc2UgJzEnOiB0aGlzLmNsb3NlTGVmdChwYWdlS2V5KTsgYnJlYWsNCiAgICAgICAgY2FzZSAnMic6IHRoaXMuY2xvc2VSaWdodChwYWdlS2V5KTsgYnJlYWsNCiAgICAgICAgY2FzZSAnMyc6IHRoaXMuY2xvc2VPdGhlcnMocGFnZUtleSk7IGJyZWFrDQogICAgICAgIGRlZmF1bHQ6IGJyZWFrDQogICAgICB9DQogICAgfSwNCiAgICBjbG9zZU90aGVycyAocGFnZUtleSkgew0KICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhZ2VMaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0uZnVsbFBhdGggPT09IHBhZ2VLZXkpDQogICAgICAvLyDmuIXpmaTnvJPlrZgNCiAgICAgIHRoaXMuY2xlYXJDYWNoZXMgPSB0aGlzLmNhY2hlZEtleXMuZmlsdGVyKChpdGVtLCBpKSA9PiBpICE9IGluZGV4KQ0KICAgICAgdGhpcy5jYWNoZWRLZXlzID0gdGhpcy5jYWNoZWRLZXlzLnNsaWNlKGluZGV4LCBpbmRleCArIDEpDQoNCiAgICAgIHRoaXMucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0LnNsaWNlKGluZGV4LCBpbmRleCArIDEpDQogICAgICBpZiAodGhpcy5hY3RpdmVQYWdlICE9IHBhZ2VLZXkpIHsNCiAgICAgICAgdGhpcy5hY3RpdmVQYWdlID0gcGFnZUtleQ0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0aGlzLmFjdGl2ZVBhZ2UpDQogICAgICB9DQogICAgfSwNCiAgICBjbG9zZUxlZnQgKHBhZ2VLZXkpIHsNCiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wYWdlTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmZ1bGxQYXRoID09PSBwYWdlS2V5KQ0KICAgICAgLy8g5riF6Zmk57yT5a2YDQogICAgICB0aGlzLmNsZWFyQ2FjaGVzID0gdGhpcy5jYWNoZWRLZXlzLmZpbHRlcigoaXRlbSwgaSkgPT4gaSA8IGluZGV4KQ0KICAgICAgdGhpcy5jYWNoZWRLZXlzID0gdGhpcy5jYWNoZWRLZXlzLnNsaWNlKGluZGV4KQ0KDQogICAgICB0aGlzLnBhZ2VMaXN0ID0gdGhpcy5wYWdlTGlzdC5zbGljZShpbmRleCkNCiAgICAgIGlmICghdGhpcy5wYWdlTGlzdC5maW5kKGl0ZW0gPT4gaXRlbS5mdWxsUGF0aCA9PT0gdGhpcy5hY3RpdmVQYWdlKSkgew0KICAgICAgICB0aGlzLmFjdGl2ZVBhZ2UgPSBwYWdlS2V5DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuYWN0aXZlUGFnZSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGNsb3NlUmlnaHQgKHBhZ2VLZXkpIHsNCiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wYWdlTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmZ1bGxQYXRoID09PSBwYWdlS2V5KQ0KICAgICAgLy8g5riF6Zmk57yT5a2YDQogICAgICB0aGlzLmNsZWFyQ2FjaGVzID0gdGhpcy5jYWNoZWRLZXlzLmZpbHRlcigoaXRlbSwgaSkgPT4gaSA+IGluZGV4KQ0KICAgICAgdGhpcy5jYWNoZWRLZXlzID0gdGhpcy5jYWNoZWRLZXlzLnNsaWNlKDAsIGluZGV4KzEpDQoNCiAgICAgIHRoaXMucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0LnNsaWNlKDAsIGluZGV4ICsgMSkNCiAgICAgIGlmICghdGhpcy5wYWdlTGlzdC5maW5kKGl0ZW0gPT4gaXRlbS5mdWxsUGF0aCA9PT0gdGhpcy5hY3RpdmVQYWdlKSkgew0KICAgICAgICB0aGlzLmFjdGl2ZVBhZ2UgPSBwYWdlS2V5DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuYWN0aXZlUGFnZSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHBhZ2VOYW1lKHBhZ2UpIHsNCiAgICAgIHJldHVybiB0aGlzLiR0KGdldEkxOG5LZXkocGFnZS5tYXRjaGVkW3BhZ2UubWF0Y2hlZC5sZW5ndGggLSAxXS5wYXRoKSkNCiAgICB9LA0KICAgIGNsb3NlUGFnZUxpc3RlbmVyKGV2ZW50KSB7DQogICAgICBjb25zdCB7Y2xvc2VSb3V0ZSwgbmV4dFJvdXRlfSA9IGV2ZW50LmRldGFpbA0KICAgICAgY29uc3QgY2xvc2VQYXRoID0gdHlwZW9mIGNsb3NlUm91dGUgPT09ICdzdHJpbmcnID8gY2xvc2VSb3V0ZSA6IGNsb3NlUm91dGUucGF0aA0KICAgICAgdGhpcy5yZW1vdmUoY2xvc2VQYXRoLCBuZXh0Um91dGUpDQogICAgfSwNCiAgICAuLi5tYXBNdXRhdGlvbnMoJ3NldHRpbmcnLCBbJ2NvcnJlY3RQYWdlTWluSGVpZ2h0J10pDQogIH0NCn0NCi8qKg0KICog55Sx5LqOYW50LWRlc2lnbi12dWXnu4Tku7blupPnmoRUYWJQYW5l57uE5Lu25pqC5LiN5pSv5oyB6Ieq5a6a5LmJ55uR5ZCs5Zmo77yM5peg5rOV55u05o6l6I635Y+W5Yiw5Y+z6ZSudGFyZ2V05omA5Zyo5qCH562+6aG155qEIHBhZ2VrZXkg44CC5pWF5aKe5Yqg5q2k5pa55rOV55So5LqODQogKiDmn6Xor6Llj7PplK50YXJnZXTmiYDlnKjmoIfnrb7pobXnmoTmoIfor4YgcGFnZWtleSDvvIzku6XnlKjkuo7oh6rlrprkuYnlj7PplK7oj5zljZXnmoTkuovku7blpITnkIbjgIINCiAqIOazqO+8mlRhYlBhbmXnu4Tku7bmlK/mjIHoh6rlrprkuYnnm5HlkKzlmajlkI7lj6/ljrvpmaTor6Xmlrnms5Xlubbph43mnoQg4oCY6Ieq5a6a5LmJ5Y+z6ZSu6I+c5Y2V55qE5LqL5Lu25aSE55CG4oCZDQogKiBAcGFyYW0gdGFyZ2V0IOafpeivouW8gOWni+ebruaghw0KICogQHBhcmFtIGRlcHRoIOafpeivouWxgue6p+a3seW6piDvvIjmn6Xmib7lsYLnuqfmnIDlpJrkuI3otoXov4cz5bGC77yM6LaF6L+HM+Wxgua3seW6puebtOaOpei/lOWbniBudWxs77yJDQogKiBAcmV0dXJucyB7U3RyaW5nfQ0KICovDQpmdW5jdGlvbiBnZXRQYWdlS2V5ICh0YXJnZXQsIGRlcHRoID0gMCkgew0KICBpZiAoZGVwdGggPiAyIHx8ICF0YXJnZXQpIHsNCiAgICByZXR1cm4gbnVsbA0KICB9DQogIHJldHVybiB0YXJnZXQuZ2V0QXR0cmlidXRlKCdwYWdla2V5JykgfHwgZ2V0UGFnZUtleSh0YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQsICsrZGVwdGgpDQp9DQo="},{"version":3,"sources":["TabsView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TabsView.vue","sourceRoot":"src/layouts/tabs","sourcesContent":["<template>\r\n  <admin-layout>\r\n    <contextmenu :itemList=\"menuItemList\" :visible.sync=\"menuVisible\" @select=\"onMenuSelect\" />\r\n    <a-tabs\r\n      v-if=\"multiPage\"\r\n      type=\"editable-card\"\r\n      :active-key=\"activePage\"\r\n      :class=\"['tabs-view', layout, pageWidth]\"\r\n      :hide-add=\"true\"\r\n      @change=\"changePage\"\r\n      @edit=\"editPage\"\r\n      @contextmenu=\"onContextmenu\"\r\n    >\r\n      <a-tab-pane :key=\"page.fullPath\" v-for=\"page in pageList\">\r\n        <span slot=\"tab\" :pagekey=\"page.fullPath\">{{pageName(page)}}</span>\r\n      </a-tab-pane>\r\n    </a-tabs>\r\n    <div class=\"tabs-view-content\" :style=\"`margin-top: ${multiPage ? -24 : 0}px`\">\r\n      <page-toggle-transition :disabled=\"animate.disabled\" :animate=\"animate.name\" :direction=\"animate.direction\">\r\n        <a-keep-alive v-if=\"multiPage\" v-model=\"clearCaches\">\r\n          <router-view ref=\"tabContent\" :key=\"$route.fullPath\" />\r\n        </a-keep-alive>\r\n        <router-view v-else />\r\n      </page-toggle-transition>\r\n    </div>\r\n  </admin-layout>\r\n</template>\r\n\r\n<script>\r\nimport AdminLayout from '@/layouts/AdminLayout'\r\nimport Contextmenu from '@/components/menu/Contextmenu'\r\nimport PageToggleTransition from '@/components/transition/PageToggleTransition'\r\nimport {mapState, mapMutations} from 'vuex'\r\nimport {getI18nKey} from '@/utils/routerUtil'\r\nimport AKeepAlive from '@/components/cache/AKeepAlive'\r\n\r\nexport default {\r\n  name: 'TabsView',\r\n  i18n: require('./i18n'),\r\n  components: { PageToggleTransition, Contextmenu, AdminLayout , AKeepAlive },\r\n  data () {\r\n    return {\r\n      clearCaches: [],\r\n      pageList: [],\r\n      cachedKeys: [],\r\n      activePage: '',\r\n      menuVisible: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('setting', ['multiPage', 'animate', 'layout', 'pageWidth']),\r\n    menuItemList() {\r\n      return [\r\n        { key: '1', icon: 'vertical-right', text: this.$t('closeLeft') },\r\n        { key: '2', icon: 'vertical-left', text: this.$t('closeRight') },\r\n        { key: '3', icon: 'close', text: this.$t('closeOthers') }\r\n      ]\r\n    },\r\n    tabsOffset() {\r\n      return this.multiPage ? 24 : 0\r\n    }\r\n  },\r\n  created () {\r\n    const route = this.$route\r\n    this.pageList.push(route)\r\n    this.activePage = route.fullPath\r\n    if (this.multiPage) {\r\n      window.addEventListener('page:close', this.closePageListener)\r\n    }\r\n  },\r\n  mounted () {\r\n    this.correctPageMinHeight(-this.tabsOffset)\r\n    if(this.multiPage){\r\n      this.cachedKeys.push(this.$refs.tabContent.$vnode.key)\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('page:close', this.closePageListener)\r\n    this.correctPageMinHeight(this.tabsOffset)\r\n  },\r\n  watch: {\r\n    '$route': function (newRoute) {\r\n      this.activePage = newRoute.fullPath\r\n      if (!this.multiPage) {\r\n        this.pageList = [newRoute]\r\n      } else if (this.pageList.findIndex(item => item.fullPath == newRoute.fullPath) == -1) {\r\n        this.$nextTick(() => {\r\n          this.cachedKeys.push(this.$refs.tabContent.$vnode.key)\r\n        })\r\n        this.pageList.push(newRoute)\r\n      }\r\n    },\r\n    'multiPage': function (newVal) {\r\n      if (!newVal) {\r\n        this.pageList = [this.$route]\r\n        window.removeEventListener('page:close', this.closePageListener)\r\n      } else {\r\n        window.addEventListener('page:close', this.closePageListener)\r\n      }\r\n    },\r\n    tabsOffset(newVal, oldVal) {\r\n      this.correctPageMinHeight(oldVal - newVal)\r\n    }\r\n  },\r\n  methods: {\r\n    changePage (key) {\r\n      this.activePage = key\r\n      this.$router.push(key)\r\n    },\r\n    editPage (key, action) {\r\n      this[action](key) // remove\r\n    },\r\n    remove (key, next) {\r\n      if (this.pageList.length === 1) {\r\n        return this.$message.warning(this.$t('warn'))\r\n      }\r\n      let index = this.pageList.findIndex(item => item.fullPath === key)\r\n      //清除缓存\r\n      this.clearCaches = this.cachedKeys.splice(index, 1)\r\n      this.pageList.splice(index, 1)\r\n      if (next) {\r\n        this.$router.push(next)\r\n      } else if (key === this.activePage) {\r\n        index = index >= this.pageList.length ? this.pageList.length - 1 : index\r\n        this.activePage = this.pageList[index].fullPath\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    onContextmenu (e) {\r\n      const pageKey = getPageKey(e.target)\r\n      if (pageKey) {\r\n        e.preventDefault()\r\n        this.menuVisible = true\r\n      }\r\n    },\r\n    onMenuSelect (key, target) {\r\n      let pageKey = getPageKey(target)\r\n      switch (key) {\r\n        case '1': this.closeLeft(pageKey); break\r\n        case '2': this.closeRight(pageKey); break\r\n        case '3': this.closeOthers(pageKey); break\r\n        default: break\r\n      }\r\n    },\r\n    closeOthers (pageKey) {\r\n      const index = this.pageList.findIndex(item => item.fullPath === pageKey)\r\n      // 清除缓存\r\n      this.clearCaches = this.cachedKeys.filter((item, i) => i != index)\r\n      this.cachedKeys = this.cachedKeys.slice(index, index + 1)\r\n\r\n      this.pageList = this.pageList.slice(index, index + 1)\r\n      if (this.activePage != pageKey) {\r\n        this.activePage = pageKey\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    closeLeft (pageKey) {\r\n      const index = this.pageList.findIndex(item => item.fullPath === pageKey)\r\n      // 清除缓存\r\n      this.clearCaches = this.cachedKeys.filter((item, i) => i < index)\r\n      this.cachedKeys = this.cachedKeys.slice(index)\r\n\r\n      this.pageList = this.pageList.slice(index)\r\n      if (!this.pageList.find(item => item.fullPath === this.activePage)) {\r\n        this.activePage = pageKey\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    closeRight (pageKey) {\r\n      const index = this.pageList.findIndex(item => item.fullPath === pageKey)\r\n      // 清除缓存\r\n      this.clearCaches = this.cachedKeys.filter((item, i) => i > index)\r\n      this.cachedKeys = this.cachedKeys.slice(0, index+1)\r\n\r\n      this.pageList = this.pageList.slice(0, index + 1)\r\n      if (!this.pageList.find(item => item.fullPath === this.activePage)) {\r\n        this.activePage = pageKey\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    pageName(page) {\r\n      return this.$t(getI18nKey(page.matched[page.matched.length - 1].path))\r\n    },\r\n    closePageListener(event) {\r\n      const {closeRoute, nextRoute} = event.detail\r\n      const closePath = typeof closeRoute === 'string' ? closeRoute : closeRoute.path\r\n      this.remove(closePath, nextRoute)\r\n    },\r\n    ...mapMutations('setting', ['correctPageMinHeight'])\r\n  }\r\n}\r\n/**\r\n * 由于ant-design-vue组件库的TabPane组件暂不支持自定义监听器，无法直接获取到右键target所在标签页的 pagekey 。故增加此方法用于\r\n * 查询右键target所在标签页的标识 pagekey ，以用于自定义右键菜单的事件处理。\r\n * 注：TabPane组件支持自定义监听器后可去除该方法并重构 ‘自定义右键菜单的事件处理’\r\n * @param target 查询开始目标\r\n * @param depth 查询层级深度 （查找层级最多不超过3层，超过3层深度直接返回 null）\r\n * @returns {String}\r\n */\r\nfunction getPageKey (target, depth = 0) {\r\n  if (depth > 2 || !target) {\r\n    return null\r\n  }\r\n  return target.getAttribute('pagekey') || getPageKey(target.firstElementChild, ++depth)\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .tabs-view{\r\n    margin: -16px auto 8px;\r\n    &.head.fixed{\r\n      max-width: 1400px;\r\n    }\r\n  }\r\n  .tabs-view-content{\r\n    position: relative;\r\n  }\r\n</style>\r\n"]}]}