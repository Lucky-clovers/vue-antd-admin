{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\src\\components\\tool\\TagSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\src\\components\\tool\\TagSelect.vue","mtime":1600420862362},{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600423573509},{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1600416510814},{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600423573509},{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1600423579954}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFRhZ1NlbGVjdE9wdGlvbiBmcm9tICcuL1RhZ1NlbGVjdE9wdGlvbic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVGFnU2VsZWN0JywKICBPcHRpb246IFRhZ1NlbGVjdE9wdGlvbiwKICBjb21wb25lbnRzOiB7CiAgICBUYWdTZWxlY3RPcHRpb246IFRhZ1NlbGVjdE9wdGlvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dUcmlnZ2VyOiBmYWxzZSwKICAgICAgY29sbGFwc2VkOiB0cnVlLAogICAgICBzY3JlZW5XaWR0aDogZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCwKICAgICAgY2hlY2tBbGw6IGZhbHNlCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHNjcmVlbldpZHRoOiBmdW5jdGlvbiBzY3JlZW5XaWR0aCgpIHsKICAgICAgdGhpcy5zaG93VHJpZ2dlciA9IHRoaXMubmVlZFRyaWdnZXIoKTsKICAgIH0sCiAgICBjb2xsYXBzZWQ6IGZ1bmN0aW9uIGNvbGxhcHNlZCh2YWwpIHsKICAgICAgdGhpcy4kZWwuc3R5bGUubWF4SGVpZ2h0ID0gdmFsID8gJzM5cHgnIDogJzc4cHgnOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7IC8vIOatpOWkhOW7tui/n+aJp+ihjO+8jOaYr+S4uuino+WGs21vdXRlZOacquWujOWFqOWujOaIkOaDheWGteS4i+W8leWPkeeahHRyaWdnZXLmmL7npLpidWcKCgogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNob3dUcmlnZ2VyID0gX3RoaXMubmVlZFRyaWdnZXIoKTsKICAgICAgX3RoaXMuJHJlZnMudHJpZ2dlci5zdHlsZS5kaXNwbGF5ID0gX3RoaXMuc2hvd1RyaWdnZXIgPyAnaW5saW5lJyA6ICdub25lJzsKICAgIH0sIDEpOwoKICAgIHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICB3aW5kb3cuc2NyZWVuV2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoOwogICAgICAgIF90aGlzLnNjcmVlbldpZHRoID0gd2luZG93LnNjcmVlbldpZHRoOwogICAgICB9KCk7CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbmVlZFRyaWdnZXI6IGZ1bmN0aW9uIG5lZWRUcmlnZ2VyKCkgewogICAgICByZXR1cm4gdGhpcy4kZWwuY2xpZW50SGVpZ2h0IDwgdGhpcy4kZWwuc2Nyb2xsSGVpZ2h0IHx8IHRoaXMuJGVsLnNjcm9sbEhlaWdodCA+IDM5OwogICAgfSwKICAgIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKCkgewogICAgICB0aGlzLmNvbGxhcHNlZCA9ICF0aGlzLmNvbGxhcHNlZDsKICAgIH0sCiAgICBnZXRBbGxUYWdzOiBmdW5jdGlvbiBnZXRBbGxUYWdzKCkgewogICAgICB2YXIgdGFnTGlzdCA9IHRoaXMuJGNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmlzVGFnU2VsZWN0T3B0aW9uOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRhZ0xpc3Q7CiAgICB9LAogICAgdG9nZ2xlQ2hlY2s6IGZ1bmN0aW9uIHRvZ2dsZUNoZWNrKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuY2hlY2tBbGwgPSAhdGhpcy5jaGVja0FsbDsKICAgICAgdmFyIHRhZ0xpc3QgPSB0aGlzLmdldEFsbFRhZ3MoKTsKICAgICAgdGFnTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS5jaGVja2VkID0gX3RoaXMyLmNoZWNrQWxsOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["TagSelect.vue"],"names":[],"mappings":";;;;;;;;;;;AASA,OAAA,eAAA,MAAA,mBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,MAAA,EAAA,eAFA;AAGA,EAAA,UAAA,EAAA;AAAA,IAAA,eAAA,EAAA;AAAA,GAHA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,KADA;AAEA,MAAA,SAAA,EAAA,IAFA;AAGA,MAAA,WAAA,EAAA,QAAA,CAAA,IAAA,CAAA,WAHA;AAIA,MAAA,QAAA,EAAA;AAJA,KAAA;AAMA,GAXA;AAYA,EAAA,KAAA,EAAA;AACA,IAAA,WAAA,EAAA,uBAAA;AACA,WAAA,WAAA,GAAA,KAAA,WAAA,EAAA;AACA,KAHA;AAIA,IAAA,SAAA,EAAA,mBAAA,GAAA,EAAA;AACA,WAAA,GAAA,CAAA,KAAA,CAAA,SAAA,GAAA,GAAA,GAAA,MAAA,GAAA,MAAA;AACA;AANA,GAZA;AAoBA,EAAA,OApBA,qBAoBA;AACA,QAAA,KAAA,GAAA,IAAA,CADA,CAEA;;;AACA,IAAA,UAAA,CAAA,YAAA;AACA,MAAA,KAAA,CAAA,WAAA,GAAA,KAAA,CAAA,WAAA,EAAA;AACA,MAAA,KAAA,CAAA,KAAA,CAAA,OAAA,CAAA,KAAA,CAAA,OAAA,GAAA,KAAA,CAAA,WAAA,GAAA,QAAA,GAAA,MAAA;AACA,KAHA,EAGA,CAHA,CAAA;;AAIA,IAAA,MAAA,CAAA,QAAA,GAAA,YAAA;AACA,aAAA,YAAA;AACA,QAAA,MAAA,CAAA,WAAA,GAAA,QAAA,CAAA,IAAA,CAAA,WAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,MAAA,CAAA,WAAA;AACA,OAHA,EAAA;AAIA,KALA;AAMA,GAjCA;AAkCA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,aAAA,KAAA,GAAA,CAAA,YAAA,GAAA,KAAA,GAAA,CAAA,YAAA,IAAA,KAAA,GAAA,CAAA,YAAA,GAAA,EAAA;AACA,KAHA;AAIA,IAAA,MAJA,oBAIA;AACA,WAAA,SAAA,GAAA,CAAA,KAAA,SAAA;AACA,KANA;AAOA,IAAA,UAPA,wBAOA;AACA,UAAA,OAAA,GAAA,KAAA,SAAA,CAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA,IAAA,CAAA,iBAAA;AACA,OAFA,CAAA;AAGA,aAAA,OAAA;AACA,KAZA;AAaA,IAAA,WAbA,yBAaA;AAAA;;AACA,WAAA,QAAA,GAAA,CAAA,KAAA,QAAA;AACA,UAAA,OAAA,GAAA,KAAA,UAAA,EAAA;AACA,MAAA,OAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,IAAA,CAAA,OAAA,GAAA,MAAA,CAAA,QAAA;AACA,OAFA;AAGA;AAnBA;AAlCA,CAAA","sourcesContent":["<template>\r\n  <div class=\"tag-select\">\r\n    <tag-select-option @click=\"toggleCheck\">全部</tag-select-option>\r\n    <slot></slot>\r\n    <a @click=\"toggle\" v-show=\"showTrigger\" ref=\"trigger\" class=\"trigger\">展开<a-icon style=\"margin-left: 5px\" :type=\"collapsed ? 'down' : 'up'\"/></a>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TagSelectOption from './TagSelectOption'\r\nexport default {\r\n  name: 'TagSelect',\r\n  Option: TagSelectOption,\r\n  components: {TagSelectOption},\r\n  data () {\r\n    return {\r\n      showTrigger: false,\r\n      collapsed: true,\r\n      screenWidth: document.body.clientWidth,\r\n      checkAll: false\r\n    }\r\n  },\r\n  watch: {\r\n    screenWidth: function () {\r\n      this.showTrigger = this.needTrigger()\r\n    },\r\n    collapsed: function (val) {\r\n      this.$el.style.maxHeight = val ? '39px' : '78px'\r\n    }\r\n  },\r\n  mounted () {\r\n    let _this = this\r\n    // 此处延迟执行，是为解决mouted未完全完成情况下引发的trigger显示bug\r\n    setTimeout(() => {\r\n      _this.showTrigger = _this.needTrigger()\r\n      _this.$refs.trigger.style.display = _this.showTrigger ? 'inline' : 'none'\r\n    }, 1)\r\n    window.onresize = () => {\r\n      return (() => {\r\n        window.screenWidth = document.body.clientWidth\r\n        _this.screenWidth = window.screenWidth\r\n      })()\r\n    }\r\n  },\r\n  methods: {\r\n    needTrigger () {\r\n      return this.$el.clientHeight < this.$el.scrollHeight || this.$el.scrollHeight > 39\r\n    },\r\n    toggle () {\r\n      this.collapsed = !this.collapsed\r\n    },\r\n    getAllTags () {\r\n      const tagList = this.$children.filter((item) => {\r\n        return item.isTagSelectOption\r\n      })\r\n      return tagList\r\n    },\r\n    toggleCheck () {\r\n      this.checkAll = !this.checkAll\r\n      const tagList = this.getAllTags()\r\n      tagList.forEach((item) => {\r\n        item.checked = this.checkAll\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .tag-select{\r\n    user-select: none;\r\n    position: relative;\r\n    overflow: hidden;\r\n    max-height: 39px;\r\n    padding-right: 50px;\r\n    display: inline-block;\r\n  }\r\n  .trigger{\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/components/tool"}]}