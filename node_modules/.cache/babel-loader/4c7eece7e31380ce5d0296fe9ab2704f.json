{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\src\\utils\\axios-interceptors.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\src\\utils\\axios-interceptors.js","mtime":1600420862452},{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600423573509},{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1600416510814},{"path":"C:\\Users\\Administrator\\Desktop\\vue-antd-admin\\node_modules\\eslint-loader\\index.js","mtime":1600416522707}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IENvb2tpZSBmcm9tICdqcy1jb29raWUnOyAvLyA0MDHmi6bmiKoKCnZhciByZXNwNDAxID0gewogIC8qKg0KICAgKiDlk43lupTmlbDmja7kuYvliY3lgZrngrnku4DkuYgNCiAgICogQHBhcmFtIHJlc3BvbnNlIOWTjeW6lOWvueixoQ0KICAgKiBAcGFyYW0gb3B0aW9ucyDlupTnlKjphY3nva4g5YyF5ZCrOiB7cm91dGVyLCBpMThuLCBzdG9yZSwgbWVzc2FnZX0NCiAgICogQHJldHVybnMgeyp9DQogICAqLwogIG9uRnVsZmlsbGVkOiBmdW5jdGlvbiBvbkZ1bGZpbGxlZChyZXNwb25zZSwgb3B0aW9ucykgewogICAgdmFyIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2U7CgogICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgIG1lc3NhZ2UuZXJyb3IoJ+aXoOatpOaOpeWPo+adg+mZkCcpOwogICAgfQoKICAgIHJldHVybiByZXNwb25zZTsKICB9LAoKICAvKioNCiAgICog5ZON5bqU5Ye66ZSZ5pe25omn6KGMDQogICAqIEBwYXJhbSBlcnJvciDplJnor6/lr7nosaENCiAgICogQHBhcmFtIG9wdGlvbnMg5bqU55So6YWN572uIOWMheWQqzoge3JvdXRlciwgaTE4biwgc3RvcmUsIG1lc3NhZ2V9DQogICAqIEByZXR1cm5zIHtQcm9taXNlPG5ldmVyPn0NCiAgICovCiAgb25SZWplY3RlZDogZnVuY3Rpb24gb25SZWplY3RlZChlcnJvciwgb3B0aW9ucykgewogICAgdmFyIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2U7CiAgICBtZXNzYWdlLmVycm9yKGVycm9yLm1lc3NhZ2UpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9Cn07CnZhciByZXNwNDAzID0gewogIG9uRnVsZmlsbGVkOiBmdW5jdGlvbiBvbkZ1bGZpbGxlZChyZXNwb25zZSwgb3B0aW9ucykgewogICAgdmFyIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2U7CgogICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7CiAgICAgIG1lc3NhZ2UuZXJyb3IoIlx1OEJGN1x1NkM0Mlx1ODhBQlx1NjJEMlx1N0VERCIpOwogICAgfQoKICAgIHJldHVybiByZXNwb25zZTsKICB9Cn07CnZhciByZXFDb21tb24gPSB7CiAgLyoqDQogICAqIOWPkemAgeivt+axguS5i+WJjeWBmuS6m+S7gOS5iA0KICAgKiBAcGFyYW0gY29uZmlnIGF4aW9zIGNvbmZpZw0KICAgKiBAcGFyYW0gb3B0aW9ucyDlupTnlKjphY3nva4g5YyF5ZCrOiB7cm91dGVyLCBpMThuLCBzdG9yZSwgbWVzc2FnZX0NCiAgICogQHJldHVybnMgeyp9DQogICAqLwogIG9uRnVsZmlsbGVkOiBmdW5jdGlvbiBvbkZ1bGZpbGxlZChjb25maWcsIG9wdGlvbnMpIHsKICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlOwogICAgdmFyIHVybCA9IGNvbmZpZy51cmwsCiAgICAgICAgeHNyZkNvb2tpZU5hbWUgPSBjb25maWcueHNyZkNvb2tpZU5hbWU7CgogICAgaWYgKHVybC5pbmRleE9mKCdsb2dpbicpID09PSAtMSAmJiB4c3JmQ29va2llTmFtZSAmJiAhQ29va2llLmdldCh4c3JmQ29va2llTmFtZSkpIHsKICAgICAgbWVzc2FnZS53YXJuaW5nKCforqTor4EgdG9rZW4g5bey6L+H5pyf77yM6K+36YeN5paw55m75b2VJyk7CiAgICB9CgogICAgcmV0dXJuIGNvbmZpZzsKICB9LAoKICAvKioNCiAgICog6K+35rGC5Ye66ZSZ5pe25YGa54K55LuA5LmIDQogICAqIEBwYXJhbSBlcnJvciDplJnor6/lr7nosaENCiAgICogQHBhcmFtIG9wdGlvbnMg5bqU55So6YWN572uIOWMheWQqzoge3JvdXRlciwgaTE4biwgc3RvcmUsIG1lc3NhZ2V9DQogICAqIEByZXR1cm5zIHtQcm9taXNlPG5ldmVyPn0NCiAgICovCiAgb25SZWplY3RlZDogZnVuY3Rpb24gb25SZWplY3RlZChlcnJvciwgb3B0aW9ucykgewogICAgdmFyIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2U7CiAgICBtZXNzYWdlLmVycm9yKGVycm9yLm1lc3NhZ2UpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICByZXF1ZXN0OiBbcmVxQ29tbW9uXSwKICAvLyDor7fmsYLmi6bmiKoKICByZXNwb25zZTogW3Jlc3A0MDEsIHJlc3A0MDNdIC8vIOWTjeW6lOaLpuaIqgoKfTs="},{"version":3,"sources":["C:/Users/Administrator/Desktop/vue-antd-admin/src/utils/axios-interceptors.js"],"names":["Cookie","resp401","onFulfilled","response","options","message","status","error","onRejected","Promise","reject","resp403","reqCommon","config","url","xsrfCookieName","indexOf","get","warning","request"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,WAAnB,C,CACA;;AACA,IAAMC,OAAO,GAAG;AACd;;;;;;AAMAC,EAAAA,WAPc,uBAOFC,QAPE,EAOQC,OAPR,EAOiB;AAAA,QACtBC,OADsB,GACXD,OADW,CACtBC,OADsB;;AAE7B,QAAIF,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC3BD,MAAAA,OAAO,CAACE,KAAR,CAAc,QAAd;AACD;;AACD,WAAOJ,QAAP;AACD,GAba;;AAcd;;;;;;AAMAK,EAAAA,UApBc,sBAoBHD,KApBG,EAoBIH,OApBJ,EAoBa;AAAA,QAClBC,OADkB,GACPD,OADO,CAClBC,OADkB;AAEzBA,IAAAA,OAAO,CAACE,KAAR,CAAcA,KAAK,CAACF,OAApB;AACA,WAAOI,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACD;AAxBa,CAAhB;AA2BA,IAAMI,OAAO,GAAG;AACdT,EAAAA,WADc,uBACFC,QADE,EACQC,OADR,EACiB;AAAA,QACtBC,OADsB,GACXD,OADW,CACtBC,OADsB;;AAE7B,QAAIF,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC3BD,MAAAA,OAAO,CAACE,KAAR;AACD;;AACD,WAAOJ,QAAP;AACD;AAPa,CAAhB;AAUA,IAAMS,SAAS,GAAG;AAChB;;;;;;AAMAV,EAAAA,WAPgB,uBAOJW,MAPI,EAOIT,OAPJ,EAOa;AAAA,QACpBC,OADoB,GACTD,OADS,CACpBC,OADoB;AAAA,QAEpBS,GAFoB,GAEGD,MAFH,CAEpBC,GAFoB;AAAA,QAEfC,cAFe,GAEGF,MAFH,CAEfE,cAFe;;AAG3B,QAAID,GAAG,CAACE,OAAJ,CAAY,OAAZ,MAAyB,CAAC,CAA1B,IAA+BD,cAA/B,IAAiD,CAACf,MAAM,CAACiB,GAAP,CAAWF,cAAX,CAAtD,EAAkF;AAChFV,MAAAA,OAAO,CAACa,OAAR,CAAgB,oBAAhB;AACD;;AACD,WAAOL,MAAP;AACD,GAde;;AAehB;;;;;;AAMAL,EAAAA,UArBgB,sBAqBLD,KArBK,EAqBEH,OArBF,EAqBW;AAAA,QAClBC,OADkB,GACPD,OADO,CAClBC,OADkB;AAEzBA,IAAAA,OAAO,CAACE,KAAR,CAAcA,KAAK,CAACF,OAApB;AACA,WAAOI,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACD;AAzBe,CAAlB;AA4BA,eAAe;AACbY,EAAAA,OAAO,EAAE,CAACP,SAAD,CADI;AACS;AACtBT,EAAAA,QAAQ,EAAE,CAACF,OAAD,EAAUU,OAAV,CAFG,CAEgB;;AAFhB,CAAf","sourcesContent":["import Cookie from 'js-cookie'\r\n// 401拦截\r\nconst resp401 = {\r\n  /**\r\n   * 响应数据之前做点什么\r\n   * @param response 响应对象\r\n   * @param options 应用配置 包含: {router, i18n, store, message}\r\n   * @returns {*}\r\n   */\r\n  onFulfilled(response, options) {\r\n    const {message} = options\r\n    if (response.status === 401) {\r\n      message.error('无此接口权限')\r\n    }\r\n    return response\r\n  },\r\n  /**\r\n   * 响应出错时执行\r\n   * @param error 错误对象\r\n   * @param options 应用配置 包含: {router, i18n, store, message}\r\n   * @returns {Promise<never>}\r\n   */\r\n  onRejected(error, options) {\r\n    const {message} = options\r\n    message.error(error.message)\r\n    return Promise.reject(error)\r\n  }\r\n}\r\n\r\nconst resp403 = {\r\n  onFulfilled(response, options) {\r\n    const {message} = options\r\n    if (response.status === 403) {\r\n      message.error(`请求被拒绝`)\r\n    }\r\n    return response\r\n  }\r\n}\r\n\r\nconst reqCommon = {\r\n  /**\r\n   * 发送请求之前做些什么\r\n   * @param config axios config\r\n   * @param options 应用配置 包含: {router, i18n, store, message}\r\n   * @returns {*}\r\n   */\r\n  onFulfilled(config, options) {\r\n    const {message} = options\r\n    const {url, xsrfCookieName} = config\r\n    if (url.indexOf('login') === -1 && xsrfCookieName && !Cookie.get(xsrfCookieName)) {\r\n      message.warning('认证 token 已过期，请重新登录')\r\n    }\r\n    return config\r\n  },\r\n  /**\r\n   * 请求出错时做点什么\r\n   * @param error 错误对象\r\n   * @param options 应用配置 包含: {router, i18n, store, message}\r\n   * @returns {Promise<never>}\r\n   */\r\n  onRejected(error, options) {\r\n    const {message} = options\r\n    message.error(error.message)\r\n    return Promise.reject(error)\r\n  }\r\n}\r\n\r\nexport default {\r\n  request: [reqCommon], // 请求拦截\r\n  response: [resp401, resp403] // 响应拦截\r\n}\r\n"]}]}